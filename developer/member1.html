

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Parts Implemented by Alin Banka &mdash; ITUCSDB1832 rc documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Developer Guide" href="index.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> ITUCSDB1832
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#database-design">Database Design</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#code">Code</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Parts Implemented by Alin Banka</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#student">Student</a></li>
<li class="toctree-l4"><a class="reference internal" href="#teachers">Teachers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#courses">Courses</a></li>
<li class="toctree-l4"><a class="reference internal" href="#auxiliary-tables">Auxiliary Tables</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ITUCSDB1832</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Developer Guide</a> &raquo;</li>
        
      <li>Parts Implemented by Alin Banka</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/developer/member1.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="parts-implemented-by-alin-banka">
<h1>Parts Implemented by Alin Banka<a class="headerlink" href="#parts-implemented-by-alin-banka" title="Permalink to this headline">¶</a></h1>
<p>The following section will give detailed information about the operations on the main tables</p>
<div class="section" id="student">
<h2>Student<a class="headerlink" href="#student" title="Permalink to this headline">¶</a></h2>
<div class="section" id="creation">
<h3>1.CREATION<a class="headerlink" href="#creation" title="Permalink to this headline">¶</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">student</span><span class="p">(</span>
<span class="n">st_id</span> <span class="nb">SERIAL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
<span class="n">username</span> <span class="nb">VARCHAR</span> <span class="k">UNIQUE</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="n">password</span> <span class="nb">VARCHAR</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="n">name</span> <span class="nb">VARCHAR</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="n">surname</span> <span class="nb">VARCHAR</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
        <span class="n">gpa</span> <span class="nb">INTEGER</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">credit</span> <span class="nb">INTEGER</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">grade</span> <span class="nb">INTEGER</span><span class="p">,</span>
        <span class="n">image</span> <span class="n">BOOL</span> <span class="k">DEFAULT</span> <span class="k">FALSE</span><span class="p">,</span>
        <span class="k">CHECK</span> <span class="p">(</span><span class="n">credit</span> <span class="o">&lt;=</span> <span class="mi">27</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">The code for the creation is a classic SQL code which consists of definition of the variables and the constraints.</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;INSERT INTO student(st_id, username, password, name, surname, grade)</span>
<span class="s2">                                        VALUES({}, </span><span class="se">\&#39;</span><span class="s2">{}</span><span class="se">\&#39;</span><span class="s2">, </span><span class="se">\&#39;</span><span class="s2">{}</span><span class="se">\&#39;</span><span class="s2">, </span><span class="se">\&#39;</span><span class="s2">{}</span><span class="se">\&#39;</span><span class="s2">, </span><span class="se">\&#39;</span><span class="s2">{}</span><span class="se">\&#39;</span><span class="s2">, {});&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">myform</span><span class="o">.</span><span class="n">studentno</span><span class="p">,</span> <span class="n">myform</span><span class="o">.</span><span class="n">username</span><span class="p">,</span> <span class="n">myform</span><span class="o">.</span><span class="n">password</span><span class="p">,</span> <span class="n">myform</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">myform</span><span class="o">.</span><span class="n">surname</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s2">&quot;grade&quot;</span><span class="p">]))</span>
<span class="k">print</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">The code above makes it possible to add a new student account to the system.</div>
</div>
</div>
<div class="section" id="reading">
<h3>2.READING<a class="headerlink" href="#reading" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;SELECT st_id FROM student WHERE ((username = &#39;</span><span class="si">%s</span><span class="s2">&#39;) AND (password = &#39;</span><span class="si">%s</span><span class="s2">&#39;));&quot;&quot;&quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">login</span><span class="o">.</span><span class="n">username</span><span class="p">,</span> <span class="n">login</span><span class="o">.</span><span class="n">password</span><span class="p">)</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="n">user</span> <span class="o">=</span> <span class="bp">None</span>
<span class="k">for</span> <span class="p">(</span><span class="n">st_id</span><span class="p">,</span> <span class="p">)</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">st_id</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
<span class="k">if</span> <span class="n">user</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
        <span class="n">session</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">login</span><span class="o">.</span><span class="n">username</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;profile&#39;</span><span class="p">,</span> <span class="n">mid</span><span class="o">=</span><span class="n">user</span><span class="p">))</span>
<span class="k">else</span><span class="p">:</span>
        <span class="n">flash</span><span class="p">(</span><span class="s2">&quot;Wrong username or password!&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;home&#39;</span><span class="p">))</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">The code above is part of the function which reads the username and the password from the table and enables login</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;SELECT name, surname, gpa, grade FROM student</span>
<span class="s2">                                        WHERE st_id=&quot;&quot;&quot;</span><span class="o">+</span><span class="n">mid</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Whereas above you can see the code that reads the data of the student and fills up the profile page.</div>
</div>
</div>
<div class="section" id="updating">
<h3>3.UPDATING<a class="headerlink" href="#updating" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;UPDATE student SET username = </span><span class="se">\&#39;</span><span class="s2">{}</span><span class="se">\&#39;</span><span class="s2">, password = </span><span class="se">\&#39;</span><span class="s2">{}</span><span class="se">\&#39;</span><span class="s2">, name = </span><span class="se">\&#39;</span><span class="s2">{}</span><span class="se">\&#39;</span><span class="s2">, surname = </span><span class="se">\&#39;</span><span class="s2">{}</span><span class="se">\&#39;</span><span class="s2"></span>
<span class="s2">WHERE st_id = </span><span class="se">\&#39;</span><span class="s2">{}</span><span class="se">\&#39;</span><span class="s2">;&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">myform</span><span class="o">.</span><span class="n">username</span><span class="p">,</span> <span class="n">myform</span><span class="o">.</span><span class="n">password</span><span class="p">,</span> <span class="n">myform</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">myform</span><span class="o">.</span><span class="n">surname</span><span class="p">,</span> <span class="n">no</span><span class="p">)</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">,</span> <span class="p">(</span><span class="n">myform</span><span class="o">.</span><span class="n">username</span><span class="p">,</span> <span class="n">myform</span><span class="o">.</span><span class="n">password</span><span class="p">,</span> <span class="n">myform</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">myform</span><span class="o">.</span><span class="n">surname</span><span class="p">))</span>
<span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">The code above is part of the update function. It makes it possible for the student to update his/her/their credentials.</div>
</div>
</div>
<div class="section" id="deletion">
<h3>4.DELETION<a class="headerlink" href="#deletion" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;DELETE FROM student WHERE st_id = {};&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">studentno</span><span class="p">,</span> <span class="n">studentno</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">The code above makes it possible for the student to delete the account.</div>
</div>
</div>
</div>
<div class="section" id="teachers">
<h2>Teachers<a class="headerlink" href="#teachers" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>1.CREATION<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">TEACHERS</span><span class="p">(</span>
<span class="n">code</span> <span class="nb">SERIAL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
<span class="n">username</span> <span class="nb">VARCHAR</span> <span class="k">UNIQUE</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="n">password</span> <span class="nb">VARCHAR</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="n">name</span> <span class="nb">VARCHAR</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="n">surname</span> <span class="nb">VARCHAR</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="n">credit</span> <span class="nb">INTEGER</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">,</span>
<span class="n">image</span> <span class="n">BOOL</span> <span class="k">DEFAULT</span> <span class="k">FALSE</span><span class="p">,</span>
<span class="k">CHECK</span><span class="p">(</span><span class="n">credit</span> <span class="o">&lt;=</span> <span class="mi">27</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">The code for the creation is a classic SQL code which consists of definition of the variables and the constraints.</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">elif</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s2">&quot;opt&quot;</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;teacher&quot;</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
                <span class="n">connection</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
                <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
                <span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;INSERT INTO teachers(code, username, password, name, surname)</span>
<span class="s2">                                                        VALUES({}, </span><span class="se">\&#39;</span><span class="s2">{}</span><span class="se">\&#39;</span><span class="s2">, </span><span class="se">\&#39;</span><span class="s2">{}</span><span class="se">\&#39;</span><span class="s2">, </span><span class="se">\&#39;</span><span class="s2">{}</span><span class="se">\&#39;</span><span class="s2">, </span><span class="se">\&#39;</span><span class="s2">{}</span><span class="se">\&#39;</span><span class="s2">);&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">myform</span><span class="o">.</span><span class="n">studentno</span><span class="p">,</span> <span class="n">myform</span><span class="o">.</span><span class="n">username</span><span class="p">,</span> <span class="n">myform</span><span class="o">.</span><span class="n">password</span><span class="p">,</span> <span class="n">myform</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">myform</span><span class="o">.</span><span class="n">surname</span><span class="p">)</span>
                <span class="k">print</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>
                <span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                <span class="n">continues</span><span class="o">...</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">The code above makes it possible to add a new teacher account to the system.</div>
</div>
</div>
<div class="section" id="id2">
<h3>2.READING<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;SELECT code FROM teachers WHERE ((username = &#39;</span><span class="si">%s</span><span class="s2">&#39;) AND (password = &#39;</span><span class="si">%s</span><span class="s2">&#39;));&quot;&quot;&quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">login</span><span class="o">.</span><span class="n">username</span><span class="p">,</span> <span class="n">login</span><span class="o">.</span><span class="n">password</span><span class="p">)</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">The code above is part of the function which reads the username and the password from the table and enables login</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;SELECT name, surname FROM teachers WHERE code=&quot;</span> <span class="o">+</span> <span class="n">mid</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Whereas above you can see the code that reads the data of the teacher and fills up the profile page.</div>
</div>
</div>
<div class="section" id="id3">
<h3>3.UPDATING<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;UPDATE teachers SET username = </span><span class="se">\&#39;</span><span class="s2">{}</span><span class="se">\&#39;</span><span class="s2">, password = </span><span class="se">\&#39;</span><span class="s2">{}</span><span class="se">\&#39;</span><span class="s2">, name = </span><span class="se">\&#39;</span><span class="s2">{}</span><span class="se">\&#39;</span><span class="s2">, surname = </span><span class="se">\&#39;</span><span class="s2">{}</span><span class="se">\&#39;</span><span class="s2"></span>
<span class="s2">WHERE code = </span><span class="se">\&#39;</span><span class="s2">{}</span><span class="se">\&#39;</span><span class="s2">;&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">myform</span><span class="o">.</span><span class="n">username</span><span class="p">,</span> <span class="n">myform</span><span class="o">.</span><span class="n">password</span><span class="p">,</span> <span class="n">myform</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">myform</span><span class="o">.</span><span class="n">surname</span><span class="p">,</span> <span class="n">no</span><span class="p">)</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">,</span> <span class="p">(</span><span class="n">myform</span><span class="o">.</span><span class="n">username</span><span class="p">,</span> <span class="n">myform</span><span class="o">.</span><span class="n">password</span><span class="p">,</span> <span class="n">myform</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">myform</span><span class="o">.</span><span class="n">surname</span><span class="p">))</span>
<span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">The code above is part of the update function. It makes it possible for the teacher to update his/her/their credentials.</div>
</div>
</div>
<div class="section" id="id4">
<h3>4.DELETION<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;DELETE FROM teachers WHERE code = {};&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;home_page&#39;</span><span class="p">))</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">The code above makes it possible for the teacher to delete the account.</div>
</div>
</div>
</div>
<div class="section" id="courses">
<h2>Courses<a class="headerlink" href="#courses" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id5">
<h3>1.CREATION<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">COURSES</span><span class="p">(</span>
<span class="n">crn</span> <span class="nb">INTEGER</span><span class="p">,</span>
<span class="n">name</span> <span class="nb">VARCHAR</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="n">grade</span> <span class="nb">FLOAT</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span>
<span class="n">attendance</span> <span class="nb">INTEGER</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">,</span>
<span class="k">last</span> <span class="nb">VARCHAR</span> <span class="k">DEFAULT</span> <span class="s1">&#39;none&#39;</span><span class="p">,</span>
<span class="n">last_weight</span> <span class="nb">FLOAT</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span>
<span class="n">last_grade</span> <span class="nb">INTEGER</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">,</span>
<span class="n">timeslot</span> <span class="nb">VARCHAR</span><span class="p">,</span>
<span class="n">studentno</span> <span class="nb">INTEGER</span> <span class="k">REFERENCES</span> <span class="n">student</span>
    <span class="k">ON</span> <span class="k">DELETE</span> <span class="k">CASCADE</span><span class="p">,</span>
<span class="n">teacherno</span> <span class="nb">INTEGER</span> <span class="k">REFERENCES</span> <span class="n">TEACHERS</span>
    <span class="k">ON</span> <span class="k">DELETE</span> <span class="k">CASCADE</span><span class="p">,</span>
<span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">(</span><span class="n">crn</span><span class="p">,</span> <span class="n">teacherno</span><span class="p">,</span> <span class="n">studentno</span><span class="p">),</span>
<span class="k">CHECK</span> <span class="p">((</span><span class="n">grade</span><span class="o">&lt;=</span><span class="mi">100</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span> <span class="k">AND</span> <span class="p">(</span><span class="n">attendance</span><span class="o">&lt;=</span><span class="mi">14</span><span class="p">))</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Above you can find the code that creates the table ‘Courses’.</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;INSERT INTO courses(crn, name, grade, attendance, timeslot, studentno, teacherno)</span>
<span class="s2">                                VALUES({}, </span><span class="se">\&#39;</span><span class="s2">{}</span><span class="se">\&#39;</span><span class="s2">, DEFAULT, DEFAULT, </span><span class="se">\&#39;</span><span class="s2">{}</span><span class="se">\&#39;</span><span class="s2">, {}, {});&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s2">&quot;course&quot;</span><span class="p">]),</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="n">course_list</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s2">&quot;course&quot;</span><span class="p">])])[</span><span class="mi">1</span><span class="p">],</span> <span class="p">(</span><span class="n">studentno</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">The code that adds courses.</div>
</div>
</div>
<div class="section" id="id6">
<h3>2.READING<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;SELECT crn, name, grade, attendance, last, last_weight, last_grade FROM courses</span>
<span class="s2">                                        WHERE studentno=&quot;&quot;&quot;</span><span class="o">+</span><span class="n">mid</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">This code reads the list of courses a student has taken and posts it to his/her/their profile</div>
</div>
</div>
<div class="section" id="id7">
<h3>3.UPDATING<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;UPDATE courses SET grade = {}, last = </span><span class="se">\&#39;</span><span class="s2">{}</span><span class="se">\&#39;</span><span class="s2">, last_weight = {}, last_grade = {} WHERE (studentno = {}) AND (crn = {});&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">((</span><span class="n">ograde</span> <span class="o">+</span> <span class="n">weight</span><span class="o">*</span><span class="n">ngrade</span><span class="p">),</span> <span class="n">cname</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">)],</span> <span class="n">key</span><span class="p">,</span> <span class="n">courseno</span><span class="p">)</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">The above code adds a grade and other information for a task</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;UPDATE courses SET attendance = {} WHERE (studentno = {}) AND (crn = {});&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">((</span><span class="n">oattendance</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">key</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">courseno</span><span class="p">))</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">And the above one updates attendance</div>
</div>
</div>
<div class="section" id="id8">
<h3>4.DELETION<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">statement</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;DELETE FROM courses WHERE crn = {} AND studentno = {};&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">crn</span><span class="p">,</span> <span class="n">studentno</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">statement</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">The code above is responsible for dropping a course</div>
</div>
<p><strong>Notice that these are the main operations. There are many more readings and updates done on the main tables. You should check the source code on Github if you want to cover them all.</strong></p>
</div>
</div>
<div class="section" id="auxiliary-tables">
<h2>Auxiliary Tables<a class="headerlink" href="#auxiliary-tables" title="Permalink to this headline">¶</a></h2>
<p>Below you can find the creation code for the auxiliary table. Extensive operations are also done on the auxiliary tables, for which you can check the source code.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">FINANCE</span><span class="p">(</span>
<span class="n">paid</span> <span class="nb">INTEGER</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">,</span>
<span class="n">topay</span> <span class="nb">INTEGER</span> <span class="k">DEFAULT</span> <span class="mi">500</span><span class="p">,</span>
<span class="n">studentno</span> <span class="nb">INTEGER</span> <span class="k">REFERENCES</span> <span class="n">student</span>
        <span class="k">ON</span> <span class="k">DELETE</span> <span class="k">CASCADE</span><span class="p">,</span>
<span class="n">last_confirmed</span> <span class="nb">INTEGER</span><span class="p">,</span>
<span class="n">isConfirmed</span> <span class="n">BOOL</span><span class="p">,</span>
<span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">(</span><span class="n">studentno</span><span class="p">),</span>
<span class="k">CHECK</span><span class="p">((</span><span class="n">paid</span><span class="o">&lt;=</span><span class="mi">500</span><span class="p">)</span> <span class="k">AND</span> <span class="p">(</span><span class="n">topay</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">))</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">AVAILABLE</span><span class="p">(</span>
<span class="n">crn</span> <span class="nb">INTEGER</span> <span class="k">UNIQUE</span><span class="p">,</span>
<span class="n">teacherno</span> <span class="nb">INTEGER</span> <span class="k">REFERENCES</span> <span class="n">TEACHERS</span>
        <span class="k">ON</span> <span class="k">DELETE</span> <span class="k">CASCADE</span><span class="p">,</span>
<span class="n">available</span> <span class="n">BOOL</span><span class="p">,</span>
<span class="n">timeslot</span> <span class="nb">VARCHAR</span><span class="p">,</span>
<span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">(</span><span class="n">crn</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">MESSAGES</span><span class="p">(</span>
<span class="n">crn</span> <span class="nb">INTEGER</span><span class="p">,</span>
<span class="n">name</span> <span class="nb">VARCHAR</span><span class="p">,</span>
<span class="n">message</span> <span class="nb">text</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">This are the main table operations for the database system</div>
<div class="line">In the messages table a custom type named ‘text’ is used, which is actually a BLOB-like type.</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="index.html" class="btn btn-neutral" title="Developer Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, ITUCSDB1832

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>